<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/fav.gif type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



<meta property="og:title" content="Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)" />
<meta property="og:description" content="Introduction I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.
Leetcode solution with useful insights
Math stackexchange with useful insights
Neetcode&rsquo;s solution, useful insights on proof
Unrelated but cool modulus related history
Note for clarity First node of the tail means -T First node of the cycle means 0" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://ashkanfaghihi.dev/posts/floyds-algorithm-intuitive-proof/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-02T18:12:35-08:00" />
<meta property="article:modified_time" content="2023-02-02T18:12:35-08:00" /><meta property="og:site_name" content="Development from &#34;Scratch&#34;" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)"/>
<meta name="twitter:description" content="Introduction I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.
Leetcode solution with useful insights
Math stackexchange with useful insights
Neetcode&rsquo;s solution, useful insights on proof
Unrelated but cool modulus related history
Note for clarity First node of the tail means -T First node of the cycle means 0"/>


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">




<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        width: .5em;
        height: .5em;
        background-color: var(--background-color);
    }
    
    ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px var(--background-color);
        border-radius: 1rem;
    }
    
    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background-color: var(--secondary-color);
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>

<meta name="description" content="">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-5/all-5.15.4.js"></script>

  <title>
Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle) | Development from &#34;Scratch&#34;

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>



<header>
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                <img src="/fav.gif" width="30" height="30"
                    class="d-inline-block align-top">
                Development from &#34;Scratch&#34;
                
            </a>

            
                <div>
                    <input id="search" autocomplete="off" class="form-control mr-sm-2 d-none d-md-block" placeholder="Ctrl + k"
                        aria-label="Search" oninput="searchOnChange(event)">
                </div>
            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                        <li class="nav-item navbar-text d-block d-md-none">
                            <div class="nav-link">
                                <input id="search" autocomplete="off" class="form-control mr-sm-2" placeholder="Ctrl + k" aria-label="Search" oninput="searchOnChange(event)">
                            </div>
                        </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#about" aria-label="about">
                            About Me
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#experience"
                            aria-label="experience">
                            Experience
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#education"
                            aria-label="education">
                            Education
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#projects"
                            aria-label="projects">
                            Projects
                        </a>
                    </li>
                    

                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#contact"
                            aria-label="contact">
                            Contact
                        </a>
                    </li>
                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/posts" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)</h1>
            <div class="text-center">
               
              <small>|</small>
              Feb 2, 2023

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>
          
          <article class="page-content  p-2">
          <h1 id="introduction">Introduction</h1>
<p>I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.</p>
<p><a href="https://leetcode.com/problems/linked-list-cycle/solutions/459356/java-two-pointer-with-proof/">Leetcode solution with useful insights</a><br>
<a href="https://math.stackexchange.com/questions/913499/proof-of-floyd-cycle-chasing-tortoise-and-hare">Math stackexchange with useful insights</a><br>
<a href="https://www.youtube.com/watch?v=gBTe7lFR3vc">Neetcode&rsquo;s solution, useful insights on proof</a><br>
<a href="https://www.youtube.com/watch?v=iIV9tdmWYmU&amp;t=0s">Unrelated but cool modulus related history</a></p>
<h1 id="note-for-clarity">Note for clarity</h1>
<p>First node of the tail means -T
First node of the cycle means 0</p>
<h1 id="in-the-cycle-scenario">In the cycle scenario</h1>
<p><img src="/images/floyds-algo-1.png" alt="image">
T represents the tail. I believe it is called tail because it looks like the tail of a tadpole.<br>
C represents the Cycle</p>
<p>Let&rsquo;s say the tortoise takes T steps from the start. This means the tortoise is now on node 0 (the start of the cycle). Using the fact that we know the hare takes two steps for every step the tortoise takes we know the hare has travelled 2T. Where is the hare though? We can make another observation that the hare is currently stuck inside the cycle. This is because we know a cycle exists (our assumption in the beginning of the problem), if the slower moving tortoise made it to the start of the cycle then the faster moving hare must already be there.
Let&rsquo;s call the node that the hare is on at the time of the tortoise entering to be called <em>r</em>.</p>
<p>If the hare has travelled a distance of T after it entered the cycle we can determine a few more things. We know that we travelled T distance while inside the cycle, we know that the cycle has a total of C nodes. There must be a relationship between C and T then.
Let&rsquo;s think of an example to see if we can come up with it.</p>
<ul>
<li>If C = T then this means the hare would end up at the start of the loop at the same time the tortoise does. r in this case would be Node 0.</li>
<li>For same reason as above this means that if T is some multiple of C then r = 0. (T = kC)</li>
<li>If T = 12 and C = 5. This means the hare travelled 2T or 24 nodes. Starting from the first node of the tail (-1) we move 12 nodes and now we&rsquo;re at the start of the cycle. We need to move 12 more so where do we land. We go around the cycle twice which means we&rsquo;ve went a total of 10 more nodes. 12 + 10 = 22. We need to travel 2 more nodes. r = 2</li>
</ul>
<h1 id="math">Math!</h1>
<p>Suprise we&rsquo;re using modulus. This is one of the few times were modulus was in directly in the nature of the question and not just an operation to perform. In the most recent example it&rsquo;s a little more clear if you look at it. Phrasing it in a more obvious way
when the hare gets to the start of the cycle it has 12 more nodes to travel. The length of the cycle is 5 nodes. 12 % 5 = 2. Another surprise is why the articles called the node hare lands on as <em>r</em>. It&rsquo;s just short for remainder.</p>
<h2 id="understanding-c---r-relationship">Understanding C - r relationship</h2>
<p>If the hare is at a node in the cycle labeled r and the tortoise is at the start of the cycle, then the distance between the two is C - r. Let&rsquo;s say that r is node 1 in the picture. Even though the tortoise looks close to the hare in this picture the direction of the cycle matters.
The hare can only move forward so the only way it can catch up to the tortoise is by overlapping it. It must travel more than one cycle to catch up to it.
<img src="/images/floyds-algo-2.png" alt="image"></p>
<p>Let&rsquo;s look at a more specific image. If the hare is on the node right after the start and the tortoise is on the start, the distance between the two is really 6 - 1(C = 6, r = 1). They are 5 nodes apart.</p>
<h2 id="once-theyre-both-in-the-cycle-it-will-take-c---r-steps-to-meet">Once they&rsquo;re both in the cycle, it will take C - r steps to meet</h2>
<p>The Neetcode youtube video shows this well. To summarize this part once they&rsquo;re both in the cycle we know how each one moves. Tortoise gets one step farther but hare will get two steps closer. When the tortoise gets farther the distance grows
from C - r -&gt; C - r + 1. However, the hare will take two steps forward. C - r + 1 -&gt; C - r - 1. The distance decreases by 1. Now it&rsquo;s just a simple coding loop decrementing by 1. Eventually it will be 0.</p>
<p>This proves:</p>
<ol>
<li>If a loop exists that the hare will catch up to the tortoise</li>
<li>If a loop exists, once the tortoise enters the cycle. It will take extactly C - r steps for the hare to catch it.</li>
</ol>
<h1 id="proof-its-on-time-complexity">Proof it&rsquo;s O(n) time complexity</h1>
<p>The leetcode link makes a good point. At first glance it&rsquo;s not obvious that the algorithm has a O(n) time complexity.</p>
<blockquote>
<p>If a cycle exists, couldn&rsquo;t we loop so many times where the algorithm is not O(n) it would be more like O(5n)</p>
</blockquote>
<p>Our math to determine that after the tortoise takes T steps, it will be caught in C - r steps helps us answer the point above. T &lt; number of total nodes. C - rem &lt; the total nodes. remainder is also guaranteed to be &lt; C since it&rsquo;s a remainder.
Therefore since T and C - rem are both less than total number of nodes we can safely say our time complexity is O(n).</p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#understanding-c---r-relationship">Understanding C - r relationship</a></li>
    <li><a href="#once-theyre-both-in-the-cycle-it-will-take-c---r-steps-to-meet">Once they&rsquo;re both in the cycle, it will take C - r steps to meet</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Intuitive%20Proof%20for%20Floyd%27s%20Algorithm%20%28Linked%20List%20Cycle%29&url=http%3a%2f%2fashkanfaghihi.dev%2fposts%2ffloyds-algorithm-intuitive-proof%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Intuitive%20Proof%20for%20Floyd%27s%20Algorithm%20%28Linked%20List%20Cycle%29: http%3a%2f%2fashkanfaghihi.dev%2fposts%2ffloyds-algorithm-intuitive-proof%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=Intuitive%20Proof%20for%20Floyd%27s%20Algorithm%20%28Linked%20List%20Cycle%29&amp;body=Check%20out%20this%20site http%3a%2f%2fashkanfaghihi.dev%2fposts%2ffloyds-algorithm-intuitive-proof%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>


<script src="/js/readingTime.js"></script>



  </div><footer>
    <div class="container py-3" id="recent-posts">
    
    
    
    
    <div class="h3 text-center text-secondary py-3">
        Recent Posts
    </div>
    <div class="row justify-content-center">
        
        <div class="col-lg-4 col-md-6 pt-2">
            <div class="card h-100">
                
                <div class="card-body bg-transparent p-3 shadow-sm">
                    <a href="/posts/stable-sort/" class="primary-font card-title">
                        <h5 class="card-title bg-transparent" title="Stable Sort = Complex Sort Logic (Draft)">Stable Sort = Complex …</h5>
                    </a>
                    <div class="card-text secondary-font">
                        <p>Introduction Sometimes you learn the hard way in life. Con is that there was a potential cost. On the plus side you will likely not forget it. In today&rsquo;s topic is brought to you by me taking twice as long to complete my interview assessment and potentially failing it for that reason. So the …</p>
                    </div>
                </div>
                <div class="mt-auto card-footer">
                    <span class="float-start">Mar 2, 2023</span>
                    <a href="/posts/stable-sort/" class="float-end btn btn-outline-info btn-sm">Read</a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6 pt-2">
            <div class="card h-100">
                
                <div class="card-body bg-transparent p-3 shadow-sm">
                    <a href="/posts/01-matrix-bfs/" class="primary-font card-title">
                        <h5 class="card-title bg-transparent" title="01 Matrix (BFS with multiple sources)">01 Matrix (BFS with …</h5>
                    </a>
                    <div class="card-text secondary-font">
                        <p>Introduction We&rsquo;re taking a look at 01 Matrix on Leetcode today. The main motivation is to realize that when using BFS you can start with multiple sources instead of a single source. This just means that even though we usually start out with a &ldquo;root&rdquo; and do BFS from there, you can …</p>
                    </div>
                </div>
                <div class="mt-auto card-footer">
                    <span class="float-start">Mar 1, 2023</span>
                    <a href="/posts/01-matrix-bfs/" class="float-end btn btn-outline-info btn-sm">Read</a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6 pt-2">
            <div class="card h-100">
                
                <div class="card-body bg-transparent p-3 shadow-sm">
                    <a href="/posts/insert-interval/" class="primary-font card-title">
                        <h5 class="card-title bg-transparent" title="Insert Interval">Insert Interval</h5>
                    </a>
                    <div class="card-text secondary-font">
                        <p>Introduction Today we&rsquo;ll take a look at Insert Interval. The reason why I think this is a useful problem to learn is because it helps you approach these problems in such a way where the code is more intuitive. Essentially the reasoning behind this problem and others like it is that it is not …</p>
                    </div>
                </div>
                <div class="mt-auto card-footer">
                    <span class="float-start">Mar 1, 2023</span>
                    <a href="/posts/insert-interval/" class="float-end btn btn-outline-info btn-sm">Read</a>
                </div>
            </div>
        </div>
        
    </div>
    
</div><div class="text-center pt-2">
    

    

    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="http://ashkanfaghihi.dev/" title="Development from &#34;Scratch&#34;">
                    <img alt="Footer logo" src="/fav.gif"
                        height="40px" width="40px">
                </a>
            </div>
            &copy; 2023  All rights reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div></footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>


    <script src="/js/search.js"></script>








  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>