<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
  Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle) · Development from &#34;Scratch&#34;
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Ashkan Faghihi">
<meta name="description" content="Introduction Link to heading I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.
Leetcode solution with useful insights
Math stackexchange with useful insights
Neetcode&rsquo;s solution, useful insights on proof
Unrelated but cool modulus related history
Note for clarity Link to heading First node of the tail means -T First node of the cycle means 0">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)"/>
<meta name="twitter:description" content="Introduction Link to heading I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.
Leetcode solution with useful insights
Math stackexchange with useful insights
Neetcode&rsquo;s solution, useful insights on proof
Unrelated but cool modulus related history
Note for clarity Link to heading First node of the tail means -T First node of the cycle means 0"/>

<meta property="og:title" content="Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)" />
<meta property="og:description" content="Introduction Link to heading I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.
Leetcode solution with useful insights
Math stackexchange with useful insights
Neetcode&rsquo;s solution, useful insights on proof
Unrelated but cool modulus related history
Note for clarity Link to heading First node of the tail means -T First node of the cycle means 0" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://ashkanfaghihi.dev/posts/floyds-algorithm-intuitive-proof/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-02T18:12:35-08:00" />
<meta property="article:modified_time" content="2023-02-02T18:12:35-08:00" />




<link rel="canonical" href="http://ashkanfaghihi.dev/posts/floyds-algorithm-intuitive-proof/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.36f76aaf39a14ecf5c3a3c6250dcaf06c238b3d8365d17d646f95cb1874e852b.css" integrity="sha256-NvdqrzmhTs9cOjxiUNyvBsI4s9g2XRfWRvlcsYdOhSs=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css" integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">




<meta name="generator" content="Hugo 0.110.0">





  </head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Development from &#34;Scratch&#34;
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                
                
                
                
              
              <li class="navigation-item">
                <a href="http://ashkanfaghihi.dev/pt-br/"></a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://ashkanfaghihi.dev/posts/floyds-algorithm-intuitive-proof/">
              Intuitive Proof for Floyd&#39;s Algorithm (Linked List Cycle)
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2023-02-02T18:12:35-08:00">
                February 2, 2023
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <h1 id="introduction">
  Introduction
  <a class="heading-link" href="#introduction">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>I found a few resources that I think did a decent job at explaining bits and pieces but not the full thing. This is also a tool for me to think things through as I go through the proof.</p>
<p><a href="https://leetcode.com/problems/linked-list-cycle/solutions/459356/java-two-pointer-with-proof/">Leetcode solution with useful insights</a><br>
<a href="https://math.stackexchange.com/questions/913499/proof-of-floyd-cycle-chasing-tortoise-and-hare">Math stackexchange with useful insights</a><br>
<a href="https://www.youtube.com/watch?v=gBTe7lFR3vc">Neetcode&rsquo;s solution, useful insights on proof</a><br>
<a href="https://www.youtube.com/watch?v=iIV9tdmWYmU&amp;t=0s">Unrelated but cool modulus related history</a></p>
<h1 id="note-for-clarity">
  Note for clarity
  <a class="heading-link" href="#note-for-clarity">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>First node of the tail means -T
First node of the cycle means 0</p>
<h1 id="in-the-cycle-scenario">
  In the cycle scenario
  <a class="heading-link" href="#in-the-cycle-scenario">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p><img src="/images/floyds-algo-1.png" alt="image">
T represents the tail. I believe it is called tail because it looks like the tail of a tadpole.<br>
C represents the Cycle</p>
<p>Let&rsquo;s say the tortoise takes T steps from the start. This means the tortoise is now on node 0 (the start of the cycle). Using the fact that we know the hare takes two steps for every step the tortoise takes we know the hare has travelled 2T. Where is the hare though? We can make another observation that the hare is currently stuck inside the cycle. This is because we know a cycle exists (our assumption in the beginning of the problem), if the slower moving tortoise made it to the start of the cycle then the faster moving hare must already be there.
Let&rsquo;s call the node that the hare is on at the time of the tortoise entering to be called <em>r</em>.</p>
<p>If the hare has travelled a distance of T after it entered the cycle we can determine a few more things. We know that we travelled T distance while inside the cycle, we know that the cycle has a total of C nodes. There must be a relationship between C and T then.
Let&rsquo;s think of an example to see if we can come up with it.</p>
<ul>
<li>If C = T then this means the hare would end up at the start of the loop at the same time the tortoise does. r in this case would be Node 0.</li>
<li>For same reason as above this means that if T is some multiple of C then r = 0. (T = kC)</li>
<li>If T = 12 and C = 5. This means the hare travelled 2T or 24 nodes. Starting from the first node of the tail (-1) we move 12 nodes and now we&rsquo;re at the start of the cycle. We need to move 12 more so where do we land. We go around the cycle twice which means we&rsquo;ve went a total of 10 more nodes. 12 + 10 = 22. We need to travel 2 more nodes. r = 2</li>
</ul>
<h1 id="math">
  Math!
  <a class="heading-link" href="#math">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Suprise we&rsquo;re using modulus. This is one of the few times were modulus was in directly in the nature of the question and not just an operation to perform. In the most recent example it&rsquo;s a little more clear if you look at it. Phrasing it in a more obvious way
when the hare gets to the start of the cycle it has 12 more nodes to travel. The length of the cycle is 5 nodes. 12 % 5 = 2. Another surprise is why the articles called the node hare lands on as <em>r</em>. It&rsquo;s just short for remainder.</p>
<h2 id="understanding-c---r-relationship">
  Understanding C - r relationship
  <a class="heading-link" href="#understanding-c---r-relationship">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>If the hare is at a node in the cycle labeled r and the tortoise is at the start of the cycle, then the distance between the two is C - r. Let&rsquo;s say that r is node 1 in the picture. Even though the tortoise looks close to the hare in this picture the direction of the cycle matters.
The hare can only move forward so the only way it can catch up to the tortoise is by overlapping it. It must travel more than one cycle to catch up to it.
<img src="/images/floyds-algo-2.png" alt="image"></p>
<p>Let&rsquo;s look at a more specific image. If the hare is on the node right after the start and the tortoise is on the start, the distance between the two is really 6 - 1(C = 6, r = 1). They are 5 nodes apart.</p>
<h2 id="once-theyre-both-in-the-cycle-it-will-take-c---r-steps-to-meet">
  Once they&rsquo;re both in the cycle, it will take C - r steps to meet
  <a class="heading-link" href="#once-theyre-both-in-the-cycle-it-will-take-c---r-steps-to-meet">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The Neetcode youtube video shows this well. To summarize this part once they&rsquo;re both in the cycle we know how each one moves. Tortoise gets one step farther but hare will get two steps closer. When the tortoise gets farther the distance grows
from C - r -&gt; C - r + 1. However, the hare will take two steps forward. C - r + 1 -&gt; C - r - 1. The distance decreases by 1. Now it&rsquo;s just a simple coding loop decrementing by 1. Eventually it will be 0.</p>
<p>This proves:</p>
<ol>
<li>If a loop exists that the hare will catch up to the tortoise</li>
<li>If a loop exists, once the tortoise enters the cycle. It will take extactly C - r steps for the hare to catch it.</li>
</ol>
<h1 id="proof-its-on-time-complexity">
  Proof it&rsquo;s O(n) time complexity
  <a class="heading-link" href="#proof-its-on-time-complexity">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The leetcode link makes a good point. At first glance it&rsquo;s not obvious that the algorithm has a O(n) time complexity.</p>
<blockquote>
<p>If a cycle exists, couldn&rsquo;t we loop so many times where the algorithm is not O(n) it would be more like O(5n)</p>
</blockquote>
<p>Our math to determine that after the tortoise takes T steps, it will be caught in C - r steps helps us answer the point above. T &lt; number of total nodes. C - rem &lt; the total nodes. remainder is also guaranteed to be &lt; C since it&rsquo;s a remainder.
Therefore since T and C - rem are both less than total number of nodes we can safely say our time complexity is O(n).</p>

      </div>


      <footer>
        


        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2023
     Ashkan Faghihi 
    ·
    
    Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  
</body>

</html>
